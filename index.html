<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>慕课网</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="top">
        <div class="top_content">
            <ul>
                <li><a href="#" onclick="SetHome(window.location)">设为首页</a></li>
                <li><a href="#" onclick="AddFavorite(window.location,document.title)">加入收藏</a></li>
                <li><a href="#">联系我们</a></li>
            </ul>
        </div>
    </div><!-- top end -->
    <div class="wrap">
        <div class="logo">
            <div class="logo-left">
                <img src="image/logo.jpg" alt="慕课网">
            </div>
            <div class="logo-right">
                <img src="image/tel.jpg" alt="服务热线">24小时服务热线 <span class="tel">123-456-7890</span>
            </div>
        </div><!-- logo end -->
        <div class="nav">
            <div class="nav-left"></div>
            <div class="nav-mid">
                <div class="nav-mid-left">
                    <ul>
                        <li><a href="#">首页</a></li>
                        <li><a href="#">关于慕课</a></li>
                        <li><a href="#">新闻动态</a></li>
                        <li><a href="#">课程中心</a></li>
                        <li><a href="#">在线课程</a></li>
                        <li><a href="#">人才招聘</a></li>
                    </ul>
                </div>
                <div class="nav-mid-right">
                    <form action="" method="post">
                        <input type="text" class="search-text">
                    </form>
                </div>
            </div>
            <div class="nav-right"></div>
        </div><!-- nav end -->
        <div id="picBox">
            <!-- <div class="loading"><img src="image/loading.gif" alt="图片加载中"></div> -->
            <div id="list" style="left:-1000px;">   <!-- 使用onfocus图片需要被.pic div包裹 -->
                    <img src="image/ad4.jpg" alt="3"/>
                    <img src="image/ad2.jpg" alt="1"/>
                    <img src="image/ad3.jpg" alt="2"/>
                    <img src="image/ad4.jpg" alt="3"/>
                    <img src="image/ad2.jpg" alt="1"/>
            </div>
            <div id="buttons">
                <span index="1" class="on"></span>
                <span index="2"></span>
                <span index="3"></span>
            </div>
            <a href="javascript:;" id="prev" class="arrow">&lt;</a>
            <a href="javascript:;" id="next" class="arrow">&gt;</a>
        </div><!--  ad end --> 
        <div class="main">
            <div class="news">
                <div class="title">
                    <h2 class="title-left">新闻中心</h2><span class="title-right"><a href="#">More&gt;&gt;</a></span>
                </div>
                <div class="news-pic">
                    <img src="image/news.jpg" alt="新闻图片"><h2><a href="#">Lorem ipsum dolor sit amet!</a></h2>
                    <p>活动时间：5月20日—5月25日<br>获奖公布时间：5月26日<br><a href="#">Learn More&gt;&gt;</a></p>
                </div>
                <div class="news-list">
                    <ul>
                        <li><span>2016-02-18</span><a href="#">Lorem ipsum dolor sit amet!</a></li> 
                        <li><span>2016-02-18</span><a href="#">Lorem ipsum dolor sit amet!</a></li>
                        <li><span>2016-02-18</span><a href="#">Lorem ipsum dolor sit amet!</a></li>
                        <li><span>2016-02-18</span><a href="#">Lorem ipsum dolor sit amet!</a></li>
                    </ul> <!-- span放在后面 IE不兼容 -->
                </div>
            </div><!-- news end -->
            <div class="course">
                <div class="title">
                    <h2 class="title-left">课程中心</h2><span class="title-right"><a href="#">More&gt;&gt;</a></span>
                </div>
                <div class="course-pic">
                    <img src="image/css.jpg" alt="css图片"><h2><a href="#">CSS圆角进化论</a></h2>
                    <p>CSS圆角的实现，经历了三大发展阶段：背景图片方式、CSS2.0+HTML标签模拟、CSS3.0圆角属性）。本案例详细讲解每一种的实现方式，并对实现的优缺点进行对比分析。</p>
                </div>
                
                <div class="course-type">
                    <ul>
                        <li>PHP开发</li>
                        <li>前端开发</li>
                        <li>JAVA开发</li>
                        <li>Android开发</li>
                    </ul>
                </div>
            </div><!-- course end -->
            <div class="sidebar">
                <div class="video">
                    <div class="title">
                        <h2 class="title-left">媒体聚焦</h2><span class="title-right"><a href="#">More&gt;&gt;</a></span>
                    </div>
                    <div class="video-content">
                        <embed src="http://player.youku.com/player.php/sid/XNjkzMDE5MTUy/v.swf" allowfullscreen="true" quality="high" width="220" height="140" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash">
                    </div>
                </div>
                <div class="sidebar-ad">
                    <a href="#" target="_blank"><img src="image/app.jpg" alt="app图片"></a>
                </div>
            </div><!-- sidebar end -->
        </div>  <!-- main end -->
    </div><!-- wrap end -->
    <div class="copyright">
        <div class="copyright-content">
            <ul>
                <li><a href="#">关于</a>
                    <ul>
                          <li><a href="#">品牌故事</a></li>
                          <li><a href="#">联系我们</a></li>
                          <li><a href="#">加入我们</a></li>
                          <li><a href="#">版权声明</a></li>
                    </ul>
                </li>
                <li><a href="#">课程</a>
                    <ul>
                          <li><a href="#">PHP开发</a></li>
                          <li><a href="#">前端开发</a></li>
                          <li><a href="#">JAVA开发</a></li>
                          <li><a href="#">Android开发</a></li>
                    </ul>
                </li>
                <li><a href="#">留言</a>
                    <ul>
                          <li><a href="#">新浪微博</a></li>
                          <li><a href="#">腾讯微博</a></li>
                          <li><a href="#">企业微信</a></li>
                          <li><a href="#">QQ空间</a></li>
                    </ul>
                </li>
                <li><a href="#">关注</a>
                    <ul>
                          <li><a href="#">意见反馈</a></li>
                          <li><a href="#">问题留言</a></li>
                          <li><a href="#">媒体联络</a></li>
                          <li><a href="#">在线客服</a></li>
                    </ul>
                </li>
                <li><a href="#"><img src="image/weixin.png" alt="微信logo">微信关注</a>
                    <ul>
                          <li>
                              <img src="image/qrcode.jpg" alt="微信二维码">
                          </li>
                    </ul>
                </li>
            </ul>
        </div>
     </div>a 
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
    -->
    <script type="text/javascript">
    window.onload = function () {
        var picBox = document.getElementById('picBox');
        var list = document.getElementById('list');
        var buttons = document.getElementById('buttons').getElementsByTagName('span');
        var prev = document.getElementById('prev');
        var next = document.getElementById('next');
        var index = 1;
        var animated = false;//优化避免重复执行
        var timer;

        function showButton(){
            for (var i = 0; i < buttons.length; i++) {
                if(buttons[i].className == 'on'){
                    buttons[i].className = '';
                    break;
                }
            }
            buttons[index - 1].className = 'on';
        }

        function animate(offset){
            animated = true; //优化避免重复执行
            var newLeft = parseInt(list.style.left) + offset;
            var time = 400; //位移总时间
            var interval = 10; //位移间隔时间
            var speed = offset/(time/interval); //每次位移量

            function go(){
                if ( (speed < 0 && parseInt(list.style.left) > newLeft) || (speed > 0 && parseInt(list.style.left) < newLeft) ) {
                    list.style.left = parseInt(list.style.left) + speed + 'px';
                    setTimeout(go,interval);
                } else {
                    animated = false;//优化避免重复执行
                    list.style.left = newLeft + "px";
                    if (newLeft > -1000 ) {
                        list.style.left = -3000 + 'px';
                    } 
                    if (newLeft < -3000 ) {
                        list.style.left = -1000 + 'px';
                    }; 
                }
            }
                go();
        }

        function play(){
            timer = setInterval(function(){ //设定定时器
                next.onclick();
            },3000)  
        }

        function stop(){
            clearInterval(timer); //关闭定时器
        }
        /*function play() {
            timer = setTimeout(function () {
                next.onclick();
                play();
            }, interval);
        }*/
        next.onclick = function(){
            if (index == 3) {
                index = 1;
            }else {
                index += 1;
            }

            showButton();
            if (!animated) {
                animate(-1000);
            };
        }

        prev.onclick = function(){
            if (index == 1) {
                index = 3;
            }else {
                index -= 1;
            }

            showButton();
            if (!animated) {
                animate(1000);
            };
        }

        //滚动button on 切换
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].onclick = function(){
                if (this.className == 'on') {
                    return;
                };
                var myIndex = parseInt(this.getAttribute('index'));
                var offset = -1000 * (myIndex - index);
                animate(offset);
                index = myIndex;
                if (!animated) {
                    showButton();
                };

            }
        };

        picBox.onmouseover = stop;  
        picBox.onmouseout = play;
        play(); //onload后自动播放
    }
    /*            function animate (offset) {
                    if (offset == 0) {
                        return;
                    }
                    animated = true;
                    var time = 300;
                    var inteval = 10;
                    var speed = offset/(time/inteval);
                    var left = parseInt(list.style.left) + offset;

                    var go = function (){
                        if ( (speed > 0 && parseInt(list.style.left) < left) || (speed < 0 && parseInt(list.style.left) > left)) {
                            list.style.left = parseInt(list.style.left) + speed + 'px';
                            setTimeout(go, inteval);
                        }
                        else {
                            list.style.left = left + 'px';
                            if(left>-200){
                                list.style.left = -1000 * len + 'px';
                            }
                            if(left<(-1000 * len)) {
                                list.style.left = '-1000px';
                            }
                            animated = false;
                        }
                    }
                    go();
                }

                function showButton() {
                    for (var i = 0; i < buttons.length ; i++) {
                        if( buttons[i].className == 'on'){
                            buttons[i].className = '';
                            break;
                        }
                    }
                    buttons[index - 1].className = 'on';
                }

                function play() {
                    timer = setTimeout(function () {
                        next.onclick();
                        play();
                    }, interval);
                }
                function stop() {
                    clearTimeout(timer);
                }

                next.onclick = function () {
                    if (animated) {
                        return;
                    }
                    if (index == 3) {
                        index = 1;
                    }
                    else {
                        index += 1;
                    }
                    animate(-1000);
                    showButton();
                }
                prev.onclick = function () {
                    if (animated) {
                        return;
                    }
                    if (index == 1) {
                        index = 3;
                    }
                    else {
                        index -= 1;
                    }
                    animate(1000);
                    showButton();
                }

                for (var i = 0; i < buttons.length; i++) {
                    buttons[i].onclick = function () {
                        if (animated) {
                            return;
                        }
                        if(this.className == 'on') {
                            return;
                        }
                        var myIndex = parseInt(this.getAttribute('index'));
                        var offset = -1000 * (myIndex - index);

                        animate(offset);
                        index = myIndex;
                        showButton();
                    }
                }

                picBox.onmouseover = stop;
                picBox.onmouseout = play;

                play();*/ 
        </script>  
</body>
</html>